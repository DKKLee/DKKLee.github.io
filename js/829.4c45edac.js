"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[829],{530:function(t,a,e){function o(t){return{all:t=t||new Map,on:function(a,e){var o=t.get(a);o?o.push(e):t.set(a,[e])},off:function(a,e){var o=t.get(a);o&&(e?o.splice(o.indexOf(e)>>>0,1):t.set(a,[]))},emit:function(a,e){var o=t.get(a);o&&o.slice().map((function(t){t(e)})),(o=t.get("*"))&&o.slice().map((function(t){t(a,e)}))}}}e.d(a,{Z:function(){return l}});const d=o();var l=d},829:function(t,a,e){e.r(a),e.d(a,{default:function(){return Q}});var o=e(252),d=e(577);const l={class:"container"},s=(0,o._)("h2",null,"購物車",-1),i={class:"table align-middle"},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"圖片"),(0,o._)("th",null,"商品名稱"),(0,o._)("th",null,"價格"),(0,o._)("th")])],-1),c={style:{width:"200px"}},r={key:0,class:"h5"},u={key:1,class:"h6"},p={key:2,class:"h5"},b={class:"btn-group btn-group-sm"},m=["onClick","disabled"],g={key:0,class:"fas fa-spinner fa-pulse"},h=(0,o.Uk)(" 查看更多 "),v=["onClick","disabled"],_={key:0,class:"fas fa-spinner fa-pulse"},y=(0,o.Uk)(" 加到購物車 "),k={class:"text-end"},w=(0,o._)("button",{type:"button",class:"btn btn-primary d-none","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Launch demo modal ",-1),f=(0,o.uE)('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Modal title</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">...</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Save changes</button></div></div></div>',1),C=[f];function x(t,a,e,f,x,M){const q=(0,o.up)("userProductModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[s,(0,o._)("table",i,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",c,[(0,o._)("div",{style:(0,d.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,o._)("td",null,(0,d.zw)(t.title),1),(0,o._)("td",null,[t.price?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",r,(0,d.zw)(t.origin_price)+" 元",1)),t.price?((0,o.wg)(),(0,o.iD)("del",u,"原價 "+(0,d.zw)(t.origin_price)+" 元",1)):(0,o.kq)("",!0),t.price?((0,o.wg)(),(0,o.iD)("div",p,"現在只要 "+(0,d.zw)(t.price)+" 元",1)):(0,o.kq)("",!0)]),(0,o._)("td",null,[(0,o._)("div",b,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a=>M.getProduct(t.id),disabled:x.loadingStatus.loadingItem===t.id||!t.is_enabled},[x.loadingStatus.loadingItem===t.id?((0,o.wg)(),(0,o.iD)("i",g)):(0,o.kq)("",!0),h],8,m),(0,o._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a=>M.addToCart(t.id),disabled:x.loadingStatus.loadingItem===t.id||!t.is_enabled},[x.loadingStatus.loadingItem===t.id?((0,o.wg)(),(0,o.iD)("i",_)):(0,o.kq)("",!0),y],8,v)])])])))),128))])]),(0,o._)("div",k,[(0,o._)("button",{class:"btn btn-outline-danger",type:"button",onClick:a[0]||(a[0]=(...t)=>M.deleteAllCarts&&M.deleteAllCarts(...t))}," 清空購物車 ")])]),(0,o.Wm)(q,{ref:"userProductModal",product:x.product,onAddToCart:M.addToCart},null,8,["product","onAddToCart"]),w,(0,o._)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onClick:a[1]||(a[1]=a=>t.modal.show())},C)],64)}var M=e(530),q=e(963);const z={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},D={class:"modal-dialog modal-xl",role:"document"},$={class:"modal-content border-0"},I={class:"modal-header bg-dark text-white"},P={class:"modal-title",id:"exampleModalLabel"},L=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),S={class:"modal-body"},A={class:"row"},T={class:"col-sm-6"},U=["src"],Z={class:"col-sm-6"},j={class:"badge bg-primary rounded-pill"},H={key:0,class:"h5"},O={key:1,class:"h6"},W={key:2,class:"h5"},Y={class:"input-group"};function E(t,a,e,l,s,i){return(0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("div",D,[(0,o._)("div",$,[(0,o._)("div",I,[(0,o._)("h5",P,[(0,o._)("span",null,(0,d.zw)(e.product.title),1)]),L]),(0,o._)("div",S,[(0,o._)("div",A,[(0,o._)("div",T,[(0,o._)("img",{class:"img-fluid",src:e.product.imagesUrl,alt:""},null,8,U)]),(0,o._)("div",Z,[(0,o._)("span",j,(0,d.zw)(e.product.category),1),(0,o._)("p",null,"商品描述："+(0,d.zw)(e.product.description),1),(0,o._)("p",null,"商品內容："+(0,d.zw)(e.product.content),1),e.product.price?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",H,(0,d.zw)(e.product.origin_price)+" 元",1)),e.product.price?((0,o.wg)(),(0,o.iD)("del",O,"原價 "+(0,d.zw)(e.product.origin_price)+" 元",1)):(0,o.kq)("",!0),e.product.price?((0,o.wg)(),(0,o.iD)("div",W,"現在只要 "+(0,d.zw)(e.product.price)+" 元",1)):(0,o.kq)("",!0),(0,o._)("div",null,[(0,o._)("div",Y,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>s.qty=t),min:"1"},null,512),[[q.nr,s.qty,void 0,{number:!0}]]),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:a[1]||(a[1]=a=>t.$emit("add-to-cart",e.product.id,s.qty))}," 加入購物車 ")])])])])])])])],512)}var K=e(244),V={props:{product:{type:Object,default(){return{}}}},data(){return{status:{},modal:"",qty:1}},mounted(){this.modal=new K.u_(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal(){this.qty=1,this.modal.show()},hideModal(){this.modal.hide()}}},B=e(744);const F=(0,B.Z)(V,[["render",E]]);var G=F,J={data(){return{products:[],product:"",cart:{},loadingStatus:{loadingItem:""}}},components:{userProductModal:G},methods:{getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/products?page=${t}`;this.$http.get(a).then((t=>{const{products:a}=t.data;this.products=a})).catch((t=>{alert(t.data.message)}))},getProduct(t){const a=`https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/product/${t}`;this.loadingStatus.loadingItem=t,this.$http.get(a).then((t=>{this.product=t.data.product,this.$refs.userProductModal.openModal()})).catch((t=>{alert(t.data.message)}))},addToCart(t,a=1){const e={product_id:t,qty:a};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/cart",{data:e}).then((t=>{console.log(t),this.isLoadingItem="",M.Z.emit("get-cart")}))},deleteAllCarts(){const t="https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/carts";this.$http.delete(t).then((t=>{alert(t.data.message),M.Z.emit("get-cart")})).catch((t=>{alert(t.data.message)}))},openWindows(){alert(111)}},mounted(){this.getProducts()}};const N=(0,B.Z)(J,[["render",x]]);var Q=N}}]);
//# sourceMappingURL=829.4c45edac.js.map