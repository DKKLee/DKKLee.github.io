{"version":3,"file":"js/829.4c45edac.js","mappings":"gHAAe,WAASA,GAAG,MAAM,CAACC,IAAID,EAAEA,GAAG,IAAIE,IAAIC,GAAG,SAASC,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,EAAEA,EAAEE,KAAKH,GAAGL,EAAES,IAAIL,EAAE,CAACC,KAAKK,IAAI,SAASN,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,IAAID,EAAEC,EAAEK,OAAOL,EAAEM,QAAQP,KAAK,EAAE,GAAGL,EAAES,IAAIL,EAAE,MAAMS,KAAK,SAAST,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,GAAGA,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEK,OAAMC,EAAEN,EAAEO,IAAI,OAAOD,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEI,EAAEC,Q,gCCEnT,MAAMW,EAAUC,IAChB,S,gGCFOC,MAAM,a,GACTC,EAAAA,EAAAA,GAAY,UAAR,OAAG,G,GACAD,MAAM,sB,GACXC,EAAAA,EAAAA,GAOQ,eANNA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,UALb,G,GAUQC,MAAA,iB,SAUGF,MAAM,M,SACNA,MAAM,M,SACNA,MAAM,M,GAGNA,MAAM,0B,kCAOJA,MAAM,2B,WAA2E,U,kCASjFA,MAAM,2B,WAA2E,W,GAQ3FA,MAAM,Y,GAYbC,EAAAA,EAAAA,GAOS,UANPE,KAAK,SACLH,MAAM,yBACN,iBAAe,QACf,iBAAe,iBAChB,uBAED,G,0eAWEI,G,mGAlFFH,EAAAA,EAAAA,GAyDM,MAzDN,EAyDM,CAxDJI,GACAJ,EAAAA,EAAAA,GAiDQ,QAjDR,EAiDQ,CAhDNK,GAQAL,EAAAA,EAAAA,GAuCQ,6BAtCNM,EAAAA,EAAAA,IAqCKC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IArCcC,EAAAA,UAARC,K,WAAXJ,EAAAA,EAAAA,IAqCK,MArCyBK,IAAKD,EAAKE,IAAxC,EACEZ,EAAAA,EAAAA,GAKK,KALL,EAKK,EAJHA,EAAAA,EAAAA,GAGO,OAFLC,OAA0E,SAA1E,0EAA0E,CAAAY,gBAAAA,OACxCH,EAAKI,gBAFzC,WAKFd,EAAAA,EAAAA,GAEK,WAAAe,EAAAA,EAAAA,IADAL,EAAKM,OAAK,IAEfhB,EAAAA,EAAAA,GAIK,WAHoBU,EAAKO,OAA5B,iBAA4BA,EAAAA,EAAAA,OAA5BX,EAAAA,EAAAA,IAAkE,MAAlE,GAAkES,EAAAA,EAAAA,IAA5BL,EAAKQ,cAAe,KAAE,IACtCR,EAAKO,QAAAA,EAAAA,EAAAA,OAA3BX,EAAAA,EAAAA,IAAoE,MAApE,EAAkC,OAAGS,EAAAA,EAAAA,IAAGL,EAAKQ,cAAe,KAAE,KAA9D,eACsBR,EAAKO,QAAAA,EAAAA,EAAAA,OAA3BX,EAAAA,EAAAA,IAA+D,MAA/D,EAAkC,SAAKS,EAAAA,EAAAA,IAAGL,EAAKO,OAAQ,KAAE,KAAzD,kBAEFjB,EAAAA,EAAAA,GAqBK,YApBHA,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBJA,EAAAA,EAAAA,GAQS,UAPPE,KAAK,SACLH,MAAM,4BACLoB,QAAK,GAAEC,EAAAA,WAAWV,EAAKE,IACvBS,SAAUZ,EAAAA,cAAca,cAAgBZ,EAAKE,KAAOF,EAAKa,YAJ5D,CAM2Cd,EAAAA,cAAca,cAAgBZ,EAAKE,KAAAA,EAAAA,EAAAA,OAA5EN,EAAAA,EAAAA,IAAoF,IAApF,uBANF,MASAN,EAAAA,EAAAA,GAQS,UAPPE,KAAK,SACLH,MAAM,yBACLoB,QAAK,GAAEC,EAAAA,UAAUV,EAAKE,IACtBS,SAAUZ,EAAAA,cAAca,cAAgBZ,EAAKE,KAAOF,EAAKa,YAJ5D,CAM2Cd,EAAAA,cAAca,cAAgBZ,EAAKE,KAAAA,EAAAA,EAAAA,OAA5EN,EAAAA,EAAAA,IAAoF,IAApF,uBANF,cA1BN,WAwCJN,EAAAA,EAAAA,GAIM,MAJN,EAIM,EAHJA,EAAAA,EAAAA,GAES,UAFDD,MAAM,yBAAyBG,KAAK,SAAUiB,QAAK,oBAAEC,EAAAA,gBAAAA,EAAAA,kBAAAA,KAAgB,gBAKjFI,EAAAA,EAAAA,IAIoBC,EAAA,CAHlBC,IAAI,mBACHC,QAASlB,EAAAA,QACTmB,YAAWR,EAAAA,WAHd,kCAMAS,GAUA7B,EAAAA,EAAAA,GA0BM,OAzBJD,MAAM,aACNa,GAAG,eACHkB,SAAS,KACT,kBAAgB,oBAChB,cAAY,OACXX,QAAK,eAAEY,EAAAA,MAAMC,SANhB,Q,+BCzEEjC,MAAM,aACNa,GAAG,eACHkB,SAAS,KACTG,KAAK,SACL,kBAAgB,oBAChB,cAAY,OACZP,IAAI,S,GAEC3B,MAAM,wBAAwBkC,KAAK,Y,GACjClC,MAAM,0B,GACJA,MAAM,mC,GACLA,MAAM,cAAca,GAAG,qB,GAG3BZ,EAAAA,EAAAA,GAKU,UAJRE,KAAK,SACLH,MAAM,YACN,kBAAgB,QAChB,aAAW,SAJb,S,GAOGA,MAAM,c,GACJA,MAAM,O,GACJA,MAAM,Y,aAGNA,MAAM,Y,GACHA,MAAM,iC,SAGPA,MAAM,M,SACNA,MAAM,M,SACNA,MAAM,M,GAEJA,MAAM,e,0CAnCzBO,EAAAA,EAAAA,IAoDM,MApDN,EAoDM,EA3CJN,EAAAA,EAAAA,GA0CM,MA1CN,EA0CM,EAzCJA,EAAAA,EAAAA,GAwCM,MAxCN,EAwCM,EAvCJA,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAEK,KAFL,EAEK,EADHA,EAAAA,EAAAA,GAAgC,aAAAe,EAAAA,EAAAA,IAAvBmB,EAAAA,QAAQlB,OAAK,KAExBmB,KAOFnC,EAAAA,EAAAA,GA2BM,MA3BN,EA2BM,EA1BJA,EAAAA,EAAAA,GAyBM,MAzBN,EAyBM,EAxBJA,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADJA,EAAAA,EAAAA,GAAyD,OAApDD,MAAM,YAAaqC,IAAKF,EAAAA,QAAQG,UAAWC,IAAI,IAApD,aAEFtC,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBJA,EAAAA,EAAAA,GAAyE,OAAzE,GAAyEe,EAAAA,EAAAA,IAA1BmB,EAAAA,QAAQK,UAAQ,IAC/DvC,EAAAA,EAAAA,GAAqC,SAAlC,SAAKe,EAAAA,EAAAA,IAAGmB,EAAAA,QAAQM,aAAW,IAC9BxC,EAAAA,EAAAA,GAAiC,SAA9B,SAAKe,EAAAA,EAAAA,IAAGmB,EAAAA,QAAQO,SAAO,GACHP,EAAAA,QAAQjB,OAA/B,iBAA+BA,EAAAA,EAAAA,OAA/BX,EAAAA,EAAAA,IAAwE,MAAxE,GAAwES,EAAAA,EAAAA,IAA/BmB,EAAAA,QAAQhB,cAAe,KAAE,IAC5CgB,EAAAA,QAAQjB,QAAAA,EAAAA,EAAAA,OAA9BX,EAAAA,EAAAA,IAA0E,MAA1E,EAAqC,OAAGS,EAAAA,EAAAA,IAAGmB,EAAAA,QAAQhB,cAAe,KAAE,KAApE,eACsBgB,EAAAA,QAAQjB,QAAAA,EAAAA,EAAAA,OAA9BX,EAAAA,EAAAA,IAAqE,MAArE,EAAqC,SAAKS,EAAAA,EAAAA,IAAGmB,EAAAA,QAAQjB,OAAQ,KAAE,KAA/D,gBACAjB,EAAAA,EAAAA,GAWM,aAVJA,EAAAA,EAAAA,GASM,MATN,EASM,WARJA,EAAAA,EAAAA,GAAyE,SAAlEE,KAAK,SAASH,MAAM,e,qCAA+BU,EAAAA,IAAGiC,GAAEC,IAAI,KAAnE,iBAA0DlC,EAAAA,SAAAA,EAAAA,C,QAAhB,OAC1CT,EAAAA,EAAAA,GAMS,UALPE,KAAK,SACLH,MAAM,kBACLoB,QAAK,eAAEY,EAAAA,MAAK,cAAgBG,EAAAA,QAAQtB,GAAIH,EAAAA,OAC1C,0BAzCjB,K,aA0DF,GACEmC,MAAO,CACLjB,QAAS,CACPzB,KAAM2C,OACNC,UACE,MAAO,MAIbC,OACE,MAAO,CACLC,OAAQ,GACRC,MAAO,GACPC,IAAK,IAGTC,UACEC,KAAKH,MAAQ,IAAII,EAAAA,GAAMD,KAAKE,MAAML,MAAO,CACvCM,UAAU,EACVC,SAAU,YAGdC,QAAS,CACPC,YACEN,KAAKF,IAAM,EACXE,KAAKH,MAAMjB,QAEb2B,YACEP,KAAKH,MAAMW,U,SClFjB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QFqGA,GACEd,OACE,MAAO,CACLe,SAAU,GACVnC,QAAS,GACToC,KAAM,GACNC,cAAe,CACb1C,YAAa,MAInB2C,WAAY,CACVC,iBAAAA,GAEFT,QAAS,CACPU,YAAYC,EAAO,GACjB,MAAMC,EAAO,6EAA2ED,IACxFhB,KAAKkB,MACFlF,IAAIiF,GACJE,MAAMC,IACL,MAAM,SAAEV,GAAaU,EAASzB,KAC9BK,KAAKU,SAAWA,KAEjBW,OAAOC,IACNC,MAAMD,EAAI3B,KAAK6B,aAGrBC,WAAWjE,GACT,MAAMyD,EAAO,uEAAqEzD,IAClFwC,KAAKY,cAAc1C,YAAcV,EACjCwC,KAAKkB,MACFlF,IAAIiF,GACJE,MAAMC,IACLpB,KAAKzB,QAAU6C,EAASzB,KAAKpB,QAC7ByB,KAAKE,MAAMY,iBAAiBR,eAE7Be,OAAOC,IACNC,MAAMD,EAAI3B,KAAK6B,aAGrBE,UAAUlE,EAAIsC,EAAM,GAClB,MAAMH,EAAO,CACXgC,WAAYnE,EACZsC,IAAAA,GAEFE,KAAK4B,cAAgBpE,EACrBwC,KAAKkB,MACFW,KAAM,mEAAkE,CAAElC,KAAAA,IAC1EwB,MAAMW,IACLC,QAAQC,IAAIF,GACZ9B,KAAK4B,cAAgB,GAErBnF,EAAAA,EAAAA,KAAa,gBAGnBwF,iBACE,MAAMhB,EAAO,oEACbjB,KAAKkB,MACFgB,OAAOjB,GACPE,MAAMC,IACLG,MAAMH,EAASzB,KAAK6B,SAEpB/E,EAAAA,EAAAA,KAAa,eAEd4E,OAAOC,IACNC,MAAMD,EAAI3B,KAAK6B,aAGrBW,cACEZ,MAAM,OAGVxB,UACEC,KAAKe,gBGhLT,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASqB,KAEpE","sources":["webpack://vue-week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue-week6/./src/libs/emitter.js","webpack://vue-week6/./src/views/CartView.vue","webpack://vue-week6/./src/components/userProductModal.vue","webpack://vue-week6/./src/components/userProductModal.vue?a028","webpack://vue-week6/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt';\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <div class=\"container\">\n    <h2>購物車</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td style=\"width: 200px\">\n            <div\n              style=\"height: 100px; background-size: cover; background-position: center\"\n              :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n            ></div>\n          </td>\n          <td>\n            {{ item.title }}\n          </td>\n          <td>\n            <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\n            <del class=\"h6\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\n            <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"getProduct(item.id)\"\n                :disabled=\"loadingStatus.loadingItem === item.id || !item.is_enabled\"\n              >\n                <i class=\"fas fa-spinner fa-pulse\" v-if=\"loadingStatus.loadingItem === item.id\"></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(item.id)\"\n                :disabled=\"loadingStatus.loadingItem === item.id || !item.is_enabled\"\n              >\n                <i class=\"fas fa-spinner fa-pulse\" v-if=\"loadingStatus.loadingItem === item.id\"></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div class=\"text-end\">\n      <button class=\"btn btn-outline-danger\" type=\"button\" @click=\"deleteAllCarts\">\n        清空購物車\n      </button>\n    </div>\n  </div>\n  <userProductModal\n    ref=\"userProductModal\"\n    :product=\"product\"\n    @addToCart=\"addToCart\"\n  ></userProductModal>\n  <!-- Button trigger modal -->\n  <button\n    type=\"button\"\n    class=\"btn btn-primary d-none\"\n    data-bs-toggle=\"modal\"\n    data-bs-target=\"#exampleModal\"\n  >\n    Launch demo modal\n  </button>\n\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    @click=\"modal.show()\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">...</div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter';\nimport userProductModal from '@/components/userProductModal.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      product: '',\n      cart: {},\n      loadingStatus: {\n        loadingItem: '',\n      },\n    };\n  },\n  components: {\n    userProductModal,\n  },\n  methods: {\n    getProducts(page = 1) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?page=${page}`;\n      this.$http\n        .get(url)\n        .then((response) => {\n          const { products } = response.data;\n          this.products = products;\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n    getProduct(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.loadingStatus.loadingItem = id;\n      this.$http\n        .get(url)\n        .then((response) => {\n          this.product = response.data.product;\n          this.$refs.userProductModal.openModal();\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data })\n        .then((res) => {\n          console.log(res);\n          this.isLoadingItem = '';\n          // get-cart\n          emitter.emit('get-cart');\n        });\n    },\n    deleteAllCarts() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\n      this.$http\n        .delete(url)\n        .then((response) => {\n          alert(response.data.message);\n          // get-cart\n          emitter.emit('get-cart');\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n    openWindows() {\n      alert(111);\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>{{ product.title }}</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <img class=\"img-fluid\" :src=\"product.imagesUrl\" alt=\"\" />\n            </div>\n            <div class=\"col-sm-6\">\n              <span class=\"badge bg-primary rounded-pill\">{{ product.category }}</span>\n              <p>商品描述：{{ product.description }}</p>\n              <p>商品內容：{{ product.content }}</p>\n              <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\n              <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\" v-if=\"product.price\">現在只要 {{ product.price }} 元</div>\n              <div>\n                <div class=\"input-group\">\n                  <input type=\"number\" class=\"form-control\" v-model.number=\"qty\" min=\"1\" />\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-primary\"\n                    @click=\"$emit('add-to-cart', product.id, qty)\"\n                  >\n                    加入購物車\n                  </button>\n                </div>\n              </div>\n            </div>\n            <!-- col-sm-6 end -->\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap';\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      status: {},\n      modal: '',\n      qty: 1,\n    };\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal, {\n      keyboard: false,\n      backdrop: 'static',\n    });\n  },\n  methods: {\n    openModal() {\n      this.qty = 1;\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n  },\n};\n</script>\n","import { render } from \"./userProductModal.vue?vue&type=template&id=0337bef0\"\nimport script from \"./userProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./userProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Project\\\\hexSchool\\\\DKKLee.github.io\\\\vue-week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CartView.vue?vue&type=template&id=cd09bc62\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Project\\\\hexSchool\\\\DKKLee.github.io\\\\vue-week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","style","type","_hoisted_18","_hoisted_2","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","item","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","onClick","$options","disabled","loadingItem","is_enabled","_createVNode","_component_userProductModal","ref","product","onAddToCart","_hoisted_17","tabindex","_ctx","show","role","$props","_hoisted_6","src","imagesUrl","alt","category","description","content","$event","min","props","Object","default","data","status","modal","qty","mounted","this","Modal","$refs","keyboard","backdrop","methods","openModal","hideModal","hide","__exports__","products","cart","loadingStatus","components","userProductModal","getProducts","page","url","$http","then","response","catch","err","alert","message","getProduct","addToCart","product_id","isLoadingItem","post","res","console","log","deleteAllCarts","delete","openWindows","render"],"sourceRoot":""}